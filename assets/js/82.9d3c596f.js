(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{394:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[s._v("以前不会记录这些，觉得没什么用，到时候查就好了，但是发现有些不常用的说明书类的知识，自己还是得看别人的博客，为什么不自己记录下来呢？(官网有时候解释得并不是那么充分,这里恰好可以作为一个补充)")]),s._v(" "),t("p",[s._v("本文通过nginx代理跑在"),t("code",[s._v("localhost:8080")]),s._v("端口的服务来了解nginx的基本使用(本文基于macOS系统)")]),s._v(" "),t("h2",{attrs:{id:"安装homebrew"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装homebrew"}},[s._v("#")]),s._v(" 安装homebrew")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("homebrew"),t("OutboundLink")],1),s._v("是一个包类似node中npm, 可以帮助你安装macOS或者linux上没有的软件, 可以使用下列命令进行安装:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("/bin/bash -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"brew-services"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#brew-services"}},[s._v("#")]),s._v(" brew services")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/Homebrew/homebrew-services",target:"_blank",rel:"noopener noreferrer"}},[s._v("brew services"),t("OutboundLink")],1),s._v("命令用来快速启动各种服务")]),s._v(" "),t("blockquote",[t("p",[s._v("brew services start\nbrew services restart\nbrew services stop\nbrew services list")])]),s._v(" "),t("h2",{attrs:{id:"安装nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx"}},[s._v("#")]),s._v(" 安装nginx")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("brew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查看是否安装成功")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nginx -v\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("帮助")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nginx -h\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),t("h3",{attrs:{id:"快速启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快速启动"}},[s._v("#")]),s._v(" 快速启动")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("brew services start nginx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"查看实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看实例"}},[s._v("#")]),s._v(" 查看实例")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("brew services list\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("看到有"),t("code",[s._v("nginx started")]),s._v("就是成功了")]),s._v(" "),t("h2",{attrs:{id:"停止-重新加载配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#停止-重新加载配置"}},[s._v("#")]),s._v(" 停止,重新加载配置")]),s._v(" "),t("ul",[t("li",[s._v("nginx -t signal")]),s._v(" "),t("li",[s._v("快速关机 nginx -s stop, nginx -s quit")]),s._v(" "),t("li",[s._v("nginx -s reload 重新加载配置文件")]),s._v(" "),t("li",[s._v("nginx -s reopen 重新打开log 文件")])]),s._v(" "),t("h2",{attrs:{id:"todo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#todo"}},[s._v("#")]),s._v(" TODO")]),s._v(" "),t("ol",[t("li",[s._v("brew开启了nginx之后,又使用"),t("code",[s._v("nginx -s stop")]),s._v("关闭了, 但是使用"),t("code",[s._v("brew services list")]),s._v("还是显示"),t("code",[s._v("started")]),s._v("?")]),s._v(" "),t("li",[s._v("systemctl是什么?")])]),s._v(" "),t("h2",{attrs:{id:"查看nginx配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看nginx配置文件"}},[s._v("#")]),s._v(" 查看nginx配置文件")]),s._v(" "),t("p",[s._v("配置文件在以下几个位置之一")]),s._v(" "),t("blockquote",[t("p",[s._v("/usr/local/nginx/conf, /etc/nginx或者 /usr/local/etc/nginx")])]),s._v(" "),t("p",[s._v("可以使用下列命令查看")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nginx -t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"配置文件的结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件的结构"}},[s._v("#")]),s._v(" 配置文件的结构")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    http {\n        server {\n            port 80;\n            server_name 'www.chenxiaoyao.cn';\n            location / {\n                root /data/www/;  //http://localhost/some/example.html => /data/www/some/example.html\n            }\n            location /images/ {\n                root /data;\n            }\n            location ~\\.(gif|jpg|png)$ {\n                root /data/images //匹配所有符合的图片\n            }\n            location / {\n                proxy_pass http://chenxiaoyao.cn:3000/;\n            }\n              location /api/ {\n                rewrite  ^/api/(.*)$  /$1 break;\n                proxy_pass http://localhost:1234;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n             }\n        }\n    }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("h4",{attrs:{id:"log文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log文件"}},[s._v("#")]),s._v(" log文件")]),s._v(" "),t("blockquote",[t("p",[s._v("/usr/local/nginx/logs 或者/var/log/nginx")])]),s._v(" "),t("h4",{attrs:{id:"查看nginx代理实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看nginx代理实例"}},[s._v("#")]),s._v(" 查看nginx代理实例")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('tasklist /fi "imagename eq nginx.exe"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"反向代理不成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#反向代理不成功"}},[s._v("#")]),s._v(" 反向代理不成功")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("    server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        server_name  localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          proxy_pass http://localhost:8001"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        location /api "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          proxy_pass http://localhost:8000/api/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          proxy_set_header Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("前端项目启动在8001端口, 后端/api/ 启动在8000, nginx默认监听80端口, 这也就意味着访问的时候直接使用"),t("code",[s._v("localhost/index.html")]),s._v("即可访问!!")]),s._v(" "),t("h2",{attrs:{id:"重定向到https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重定向到https"}},[s._v("#")]),s._v(" 重定向到https")]),s._v(" "),t("p",[s._v("证书生成")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.liaoxuefeng.com/article/990311924891552",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.liaoxuefeng.com/article/990311924891552"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);